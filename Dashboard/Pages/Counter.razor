@page "/counter"
@using Dashboard.Services.Interfaces
@inject IMessageQueueService MessageQueueService

<h1>Counter</h1>

<p>Current soil moisture: @_value</p>

<button class="btn btn-primary" @onclick="Connect">Connect</button>
<button class="btn btn-primary" @onclick="GetSoilMoisture">Refresh</button>

@code {

    private int _value;

    private void Connect()
    {
        MessageQueueService.Connect();
    }


    private async Task GetSoilMoisture()
    {
        var soilMoisture = await MessageQueueService.GetData();
        _value = soilMoisture.Value;
        Console.WriteLine($"value is {_value}");
    }

}